using System; 
using System.Collections.Generic; 

namespace Proyecto_POO
{
	class Program
	{
		//agregar cuenta
		public static void CuentaNueva(Banco c)
		{ 
			bool NumeroInvalido = false; // Variable usada para validar que el número no esté repetido.
			bool EsNumero = false; // Variable que indica si la entrada del número contiene solo dígitos.
			bool DniNoEncontrado = true; // Asume inicialmente que el DNI no está en la lista de clientes.
			bool ApellidoValido = false; // Variable de validación del apellido.
			bool DniValido = false; // Variable de validación del DNI.
			bool SaldoValido = false; //Variable de validacion del saldo.
			Cuenta p = new Cuenta("","","", 0); // Se crea una instancia vacía de Cuenta para rellenarla.
			while (!EsNumero){
			try{
				Console.WriteLine("Ingrese numero de cuenta:"); // Pide número de cuenta al usuario.
				p.Numero = Console.ReadLine(); // Lee la entrad a y la asigna al Numero del usuario.
				ValidarEntradaNumerica(p.Numero); // Valida que la entrada contenga solo caracteres numéricos.
				EsNumero = true; // Si no lanzó excepción, la entrada es numérica.
				}
					catch (CaracterInvalidoException){
					Console.WriteLine("Error, intente nuevamente. Ingrese un número."); // Mensaje en caso de caracter inválido.
				}
			}
			while(!NumeroInvalido){
				try{
					ValidarNumero(p.Numero, c); // Verifica que el número de cuenta no exista ya en el banco.
					NumeroInvalido = true; // Si no lanzó excepción, el número es válido (no repetido).
				}
				catch (NumeroIgualExcepction){
					Console.WriteLine("Ese numero de cuenta ya existe, intente nuevamente\n"); // Mensaje si número ya existe.
				}
			}
			while(!ApellidoValido){
			try{
			Console.WriteLine("Ingrese su apellido"); // Pide el apellido.
			p.Apellido = Console.ReadLine(); // Lee y asigna el apellido.
			ValidarEntrada(p.Apellido); // Valida que no contenga números ni sea vacío.
			ApellidoValido = true; // Marca apellido como válido si no genera excepción.
			}
			catch (CaracterInvalidoException){
				Console.WriteLine("Se introdujo un caracter invalido"); // Mensaje por entrada inválida.
				}}
			while (!DniValido){
			try{
			Console.WriteLine("Ingrese su DNI:"); // Pide el DNI.
			p.Dni = Console.ReadLine(); // Lee y asigna el DNI.
			ValidarEntradaNumerica(p.Dni); // Valida que la entrada contenga solo letras? (ver implementación más abajo).
			DniValido = true; // Si no hay excepción, marca como válido.
			}
			catch (CaracterInvalidoException){
				Console.WriteLine("Se introdujo un caracter invalido");
				}}
			
			foreach (Cliente r in c.listaClientes){
				if(r.Dni == p.Dni)
				{ 
					DniNoEncontrado = false; // Si encuentra un cliente con ese DNI, marca como encontrado.
				}
			}
			if  (DniNoEncontrado == true){
				
				Console.WriteLine("No existe en el sistema, debe agregarse como cliente nuevo\n"); // Indica que debe crearse un cliente.
				NuevoCliente(c, p.Dni, p.Apellido); // Llama al método para crear un cliente nuevo con dni y apellido.
			}
			while(!SaldoValido){
				try{
			Console.WriteLine("Ingrese su saldo"); // Pide el saldo inicial de la cuenta.
			p.Saldo = double.Parse(Console.ReadLine()); // Lee el saldo ingresado.
			SaldoPositivo(p.Saldo);//Validamos si el saldo es positivo.
			SaldoValido = true;
				}
				catch(SaldoNegativoException){
					Console.WriteLine("Error, ingrese un valor valido");
				}
			}
			c.AgregarCuenta(p); // Agrega la cuenta al banco.
			Console.WriteLine("¡Cuenta agregada con exito!"); // Mensaje de éxito.
		}
		
		static void ValidarNumero(string p, Banco c)
		{ // Método auxiliar que verifica que el número de cuenta no exista en la lista del banco.
			foreach(Cuenta d in c.listaCuentas)
			{
				if(p == d.Numero)
				{
					throw new NumeroIgualExcepction(); // Lanza excepción si el número ya existe.
				}
			}
		}
		
		//Si no hay cliente para esa cuenta, agregar cliente
		public static void NuevoCliente(Banco c, string dni, string apellido)
		{
			bool NombreValido = false; // Variable para validar nombre.
			bool DireccionValida = false; // Variable para validar dirección.
			bool TelefonoValido = false; // Variable para validar teléfono.
			bool EmailValido = false; // Variable para validar email.
			Cliente d = new Cliente("", apellido,"","","", dni); // Crea objeto Cliente con apellido y dni que ya se tiene, se deja los otros campos vacíos.
			while(!NombreValido){
			try{
			Console.WriteLine("Ingrese su nombre:"); // Pide nombre del cliente.
			d.NombreC = Console.ReadLine(); // Lee y asigna nombre.
			ValidarEntrada(d.NombreC); // Valida nombre (sin números ni vacío).
			NombreValido = true; // Marca nombre como válido.
				}
				catch (CaracterInvalidoException){
				Console.WriteLine("Se introdujo un caracter invalido");
				}
			}
			while (!DireccionValida){
			try{
			Console.WriteLine("Ingrese su dirección:"); // Pide dirección.
			d.Direccion = Console.ReadLine(); // Lee dirección.
			ValidarEntrada(d.Direccion); // Valida que no tenga números o no esté vacío (según ValidarEntrada).
			DireccionValida = true; // Marca como válida.
			}
			catch (CaracterInvalidoException){
			Console.WriteLine("Se introdujo un caracter invalido");
			}
			}
			while (!TelefonoValido){
			try{
			Console.WriteLine("Ingrese su telefono:"); // Pide teléfono.
			d.Telefono = Console.ReadLine(); // Lee y asigna teléfono.
			ValidarEntradaNumerica(d.Telefono); // Valida usando ValidarLetra (nota: implementación puede ser incorrecta para números).
			TelefonoValido = true; // Marca teléfono como válido si no lanza excepción.
				}
			catch (CaracterInvalidoException){
				Console.WriteLine("Se introdujo un caracter invalido");
			}
			}	
			while(!EmailValido){
			try{
			Console.WriteLine("Ingrese su email:"); // Pide email.
			d.Email = Console.ReadLine(); // Lee email.
			ValidarEmail(d.Email); // Valida que contenga un '@'.
			EmailValido = true; // Marca email como válido.
			}
			catch (CaracterInvalidoException){
			Console.WriteLine("Se introdujo un caracter invalido");
			}
			}
			c.AgregarCliente(d); // Agrega el cliente al banco.
			Console.WriteLine("¡Cliente agregado con éxito!"); // Mensaje de éxito.
		}
		
		
		//eliminar cuenta
		public static void EliminarCuenta(Banco c)
		{ 
			Console.Write("Ingrese su número de cuenta: "); // Solicita número de cuenta.
			string numeroCuenta = Console.ReadLine(); // Lee la entrada del usuario.
			int cantidad = 0; // Contador de cuentas que tiene el cliente.
			string ayuda = ""; // Variable para guardar el DNI asociado a la cuenta a eliminar.
			Cuenta cuentaAEliminar = null; // Referencia a la cuenta que se eliminará.
			Cliente repuesto = null; // Referencia a cliente potencialmente a eliminar.
			
			foreach (Cuenta P in c.listaCuentas)
			{
				if (P.Numero == numeroCuenta)
				{
					cuentaAEliminar = P; // Encuentra la cuenta que coincide con el número ingresado.
					ayuda = cuentaAEliminar.Dni; // Guarda el DNI del dueño de esa cuenta.
				}
			}

			if (c.ExisteCuenta(cuentaAEliminar) == true)
			{
				c.EliminarCuentas(cuentaAEliminar); // Si la cuenta existe, la elimina del banco.
				Console.WriteLine("Cuenta eliminada.");
			}
			else{
				Console.WriteLine("La cuenta no existe"); // Mensaje si no existe la cuenta.
			}
			
			foreach(Cuenta r in c.listaCuentas)
			{
				if(ayuda == r.Dni)
				{
					cantidad++; // Cuenta cuántas cuentas quedan asociadas al DNI.
				}
			}

			if (cantidad == 0){
				foreach(Cliente m in c.listaClientes){
					if(ayuda == m.Dni){
						repuesto = m; // Busca al cliente que corresponde al DNI guardado.
					}
				}
				if(repuesto != null && ayuda == repuesto.Dni){
					EliminarCliente(c); // Si no tiene más cuentas, elimina también al cliente.
					Console.WriteLine("Cliente eliminado");
				}
			}
		}
		
		//Si no hay mas cuentas para ese cliente, elimina Cliente
		public static void EliminarCliente(Banco c)
		{ 
			Console.WriteLine("No hay mas Cuentas para este Cliente.\nIngrese su Dni (unico de cada Cliente): "); // Solicita DNI para eliminar.
			string dni = Console.ReadLine(); // Lee DNI.
			Cliente clienteAEliminar = null; // Referencia al cliente a eliminar.
			foreach(Cliente l in c.listaClientes){
				if(dni == l.Dni){
					clienteAEliminar = l; // Encuentra el cliente por DNI.
				}
			}
			if (c.ExisteCliente(clienteAEliminar) == true){
				c.EliminarClientes(clienteAEliminar); // Si existe, lo elimina.
				Console.WriteLine("Cliente eliminado.");
			}
			else
			{
				Console.WriteLine("El cliente no existe."); // Mensaje si no existe el cliente.
			}
		}
		
		//Lista clientes con mas de una cuenta
		public static void ListarClientes(Banco c)
		{
			Console.WriteLine("Clientes con mas de una cuenta: \n"); // Encabezado de la lista.
			bool halloClientes = false; // Variable para saber si encontró alguno.
			foreach(Cliente e in c.listaClientes)
			{
				int cantidad = 0; // Contador de cuentas por cliente.
				
				foreach(Cuenta d in c.listaCuentas) //Busca las cuentas del cliente
				{
					if(e.Dni == d.Dni)
					{
						cantidad++; // Incrementa si la cuenta pertenece al cliente.
					}
				}
				
				if (cantidad > 1)
				{
					halloClientes = true; // Marca que hay clientes con múltiples cuentas.
					Console.WriteLine("Apellido: {0}, Dni: {1}, Cantidad de cuentas: {2}", e.ApellidoC, e.Dni, cantidad); // Muestra datos del cliente.
					
					foreach (Cuenta d in c.listaCuentas)
					{
						if (e.Dni == d.Dni)
						{
							Console.WriteLine("N° Cuenta: {0}, Saldo: ${1}", d.Numero, d.Saldo); // Lista las cuentas del cliente.
						}
					}
				}
			}
				if(halloClientes == false){
					Console.WriteLine("No hay clientes con multiples cuentas"); // Mensaje si no encontró ninguno.
				}

		}
			
			//Extrar de una Cuenta			
			public static void ExtraerStatic(Banco c){
			Cuenta ayuda = null; // Referencia a la cuenta desde la cual extraer.
			bool saldoInf = false; // Variable para controlar la validación del saldo.
			bool NumeroValido = false; // Variable para validar existencia del número.
			double extraccion = 0; // Monto a extraer.
			string num = null; // Número de cuenta ingresado.
			while (!NumeroValido){
			try{
			Console.WriteLine("Ingrese el numero de cuenta:"); // Solicita número de cuenta.
			num = Console.ReadLine(); // Lee número.
			ValidarExistencia(num, c); // Valida que la cuenta exista en el banco.
			NumeroValido = true; // Marca como válido si no lanzó excepción.
			}
				catch(CuentaInexistenteException){		
				Console.WriteLine("Se ingresó un numero de cuenta inexistente. Intente nuevamente");
				}
			}
			while(!saldoInf){
			try{
			Console.WriteLine("Ingrese el saldo a extraer"); // Solicita monto a extraer.
			extraccion = double.Parse(Console.ReadLine()); // Lee y parsea el monto.
			foreach(Cuenta e in c.listaCuentas){ //Busca la cuenta que le pertenezca al cliente
				if (e.Numero == num){
					ayuda = e; //Lo guarda en una variable ayuda
				}
			}
				ValidarSaldo(ayuda, extraccion); // Valida que haya saldo suficiente.
				saldoInf = true; // Marca que la validación fue exitosa.
				}
			catch (SaldoInsuficienteException){
				Console.WriteLine("Saldo insuficiente en cuenta {0} para realizar la operacion", ayuda.Numero); // Mensaje si no hay saldo.
				Console.WriteLine("Saldo disponible: " + ayuda.Saldo);
				Console.WriteLine("Intente nuevamente (si su saldo es 0, ingrese 0 al momento de realizar la extraccion)");
				}
			}
			
			if (c.ExisteCuenta(ayuda) == true){
				ayuda.ExtraerSaldo(extraccion); // Si existe la cuenta, realiza la extracción.
				Console.WriteLine("Saldo restante: " + ayuda.Saldo); // Muestra el saldo restante.
			}
		}
		
		//Deposito en una cuenta
		public static void DepositarStatic(Banco c){
			Cuenta ayuda = null; // Referencia a la cuenta objetivo.
			bool NumeroValido = false; // Bandera para validar número de cuenta.
			bool NumeroValido2 = false; // Bandera para validar monto ingresado.
			double deposito = 0; // Monto a depositar (nota: no se asigna hasta el final).
			string depositoayuda = ""; // Variable auxiliar para la validación de entrada numérica.
			string num = null; // Número de cuenta.
			while (!NumeroValido){
			try{
			Console.WriteLine("Ingrese el numero de cuenta:");
			num = Console.ReadLine();
			ValidarExistencia(num, c); // Valida que la cuenta exista.
			NumeroValido = true;
			}
				catch(CuentaInexistenteException){		
				Console.WriteLine("Se ingresó un numero de cuenta inexistente. Intente nuevamente");
				}
			}
			
			while (!NumeroValido2){
			try{
			depositoayuda = Convert.ToString(deposito); // Convierte (inicialmente 0) a string (esta línea no aporta a la validación realmente).
			Console.WriteLine("Ingrese el saldo a depositar"); // Solicita monto a depositar.
			depositoayuda = Console.ReadLine(); // Lee la entrada en string.
			ValidarEntradaNumerica(depositoayuda); // Valida que la entrada sea numérica.
			NumeroValido2 = true; // Marca como válida la entrada numérica.
			}
				catch(CaracterInvalidoException){
				Console.WriteLine("Se ingresó una letra o un caracter invalido. Intente nuevamente");
			}
			}
			foreach(Cuenta e in c.listaCuentas){ // Busca la cuenta por número para operar.
				if (e.Numero == num){
					ayuda = e; 
				}
			}

			deposito = double.Parse(depositoayuda);//se convierte la cadena en double

			if (c.ExisteCuenta(ayuda) == true){
				ayuda.DepositarSaldo(deposito); // Llama al método para depositar.
				Console.WriteLine("Saldo actual: " + ayuda.Saldo); // Muestra el saldo actual.
			}
		}
		
		//Transferencia entre cuentas
		public static void TransferirStatic(Banco c){
			Cuenta ayuda = null; // Cuenta desde la que se resta.
			Cuenta ayudados = null; // Cuenta a la que se suma.
			bool saldoInf = false; // Variable para validar saldo.
			bool NumeroValido = false; // Variable para validar primera cuenta.
			bool NumeroValido2 = false; // Variable para validar segunda cuenta.
			bool Iguales = false; // Variable que indica si las cuentas ingresadas son distintas.
			double transferencia = 0; // Monto a transferir.
			string sumarnum = ""; // Número de cuenta destino.
			string restarnum = ""; // Número de cuenta origen.
			while(!Iguales){
			try{
			while (!NumeroValido){
			try{
			Console.WriteLine("Ingrese el numero de su cuenta:");
			restarnum = Console.ReadLine(); //Pide el numero de cuenta de origen
			ValidarEntradaNumerica(restarnum); // Valida que contenga solo dígitos.
			ValidarExistencia(restarnum, c); // Valida que exista la cuenta.
			NumeroValido = true;
				}
				catch(CaracterInvalidoException){
					Console.WriteLine("Se ingresó una letra o un caracter invalido. Intente nuevamente");
				}
				catch(CuentaInexistenteException){
					Console.WriteLine("El numero de cuenta ingresado no coincide con ninguna cuenta existente");
				}
			}
			while (!NumeroValido2){
			try{
			Console.WriteLine("Ingrese el numero de la cuenta a transferir:");
			sumarnum = Console.ReadLine(); //Pide el numero de cuenta de destino
			ValidarEntradaNumerica(sumarnum); // Valida formato numérico.
			ValidarExistencia(sumarnum, c); // Valida existencia.
			NumeroValido2 = true;
				}
				catch(CaracterInvalidoException){
					Console.WriteLine("Se ingresó una letra o un caracter invalido. Intente nuevamente");
				}
				catch(CuentaInexistenteException){
					Console.WriteLine("El numero de cuenta ingresado no coincide con ninguna cuenta existente");
				}
			}
				ValidarIgualdad(restarnum, sumarnum); // Lanza excepción si ambos números son iguales.
				Iguales = true; // Si no lanzó excepción, las cuentas son distintas.
			}
			catch (NumerosDeCuentaIgualesExcepction){
				Console.WriteLine("No se puede tranferir dinero a una misma cuenta. Intente nuevamente.");
				NumeroValido = false; // Resetea variables para volver a pedir datos.
				NumeroValido2 = false;
			}
			}
			
			while(!saldoInf){
			try{
			Console.WriteLine("Ingrese el saldo a transferir"); // Pide monto a transferir.
			transferencia = double.Parse(Console.ReadLine()); // Lee el monto.
			foreach(Cuenta e in c.listaCuentas){
				if (e.Numero == restarnum){// Busca cuenta origen.
					ayuda = e; 
				}
			}
			
			foreach(Cuenta e in c.listaCuentas){// Busca cuenta destino.
				if (e.Numero == sumarnum){
					ayudados = e; 
				}
			}
				ValidarSaldo(ayuda, transferencia); // Valida que la cuenta origen tenga saldo suficiente.
				saldoInf = true; // Si no lanza excepción, el saldo es suficiente.
				}
				catch (SaldoInsuficienteException){
				Console.WriteLine("Saldo insuficiente en cuenta {0} para realizar la operacion", ayuda.Numero);
				Console.WriteLine("Saldo disponible: " + ayuda.Saldo);
				Console.WriteLine("Intente nuevamente (si su saldo es 0, ingrese 0 al momento de realizar la transferencia)");
			}
			}
			
			
			if (c.ExisteCuenta(ayuda) == true){
				ayuda.ExtraerSaldo(transferencia); // Extrae del origen.
				Console.WriteLine("Saldo restante de la cuenta {0}: {1} ", ayuda.Numero, ayuda.Saldo);
			}
			
			if (c.ExisteCuenta(ayudados) == true){
				ayudados.DepositarSaldo(transferencia); // Deposita en la cuenta destino.
				Console.WriteLine("Saldo de la cuenta {0}: {1}", ayudados.Numero, ayudados.Saldo);
			}
			
		}
		
			public static void ValidarSaldo(Cuenta p, double transferencia){
				if(transferencia > p.Saldo){
				throw new SaldoInsuficienteException(); // Lanza excepción si se intenta extraer más del saldo.
				}
			}
		
		public static void SaldoPositivo(double saldo){
			if(saldo < 0){
				throw new SaldoNegativoException();//Comprobamos si el saldo es positivo, y si lo es, lanza una excepcion.
			}
		}
			
			//Listado de Cuentas			
			public static void ListadoCuentas(Banco c)
			{
				if (c.CantidadCuentas() == 0)
				{
					Console.WriteLine("No hay cuentas registrados en el banco."); // Mensaje si no hay cuentas.
					return; // Sale del método.
				}
				foreach (Cuenta p in c.listaCuentas)
				{
					p.MostrarDatosP(); // Llama a método de la entidad Cuenta para mostrar sus datos en consola.
				}
			}
			
			//Listado de Clientes			
			public static void ListadoClientes(Banco c)
			{
				if (c.CantidadClientes() == 0)
				{
					Console.WriteLine("No hay clientes registrados en el banco."); // Mensaje si no hay clientes.
					return; // Sale del método.
				}
				foreach (Cliente d in c.listaClientes)
				{
					d.MostrarDatos(); // Llama al método de Cliente para mostrar sus datos.
				}
			}
			
			public static void ValidarEntradaNumerica(string entrada)
			{
			if (entrada == null || entrada == "")
			{
				throw new CaracterInvalidoException(); // Lanza excepción si la cadena es null o vacía.
			}	
			foreach(char c in entrada)
			{
				if (c < '0' || c > '9')
			{
					throw new CaracterInvalidoException(); // Lanza excepción si encuentra un caracter no numérico.
				}	
			}
		}
				
			public static void ValidarEntrada(string n){
				if(n == null || n == ""){
					throw new CaracterInvalidoException(); // Lanza excepción si n es null o vacío.
				}
				foreach (char c in n){
		  		  if (c >= '0' && c <= '9')
		    	    throw new CaracterInvalidoException(); // Lanza excepción si encuentra un dígito en la cadena.
					}
			}
			public static void ValidarLetra(string n){
				if(n == null || n == ""){
					throw new CaracterInvalidoException(); // Lanza excepción si n es null o vacío.
				}
			foreach (char c in n){
				if (!((c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z'))){
		    		throw new CaracterInvalidoException(); // Lanza excepción si no se encuentra una letra en la cadena.
				}
			}
			}
			
			public static void ValidarEmail(string email)
			{
				bool arroba = false; // Bandera para detectar la presencia de '@'.
				if (email == null){
				throw new CaracterInvalidoException(); // Lanza si email es null.
				}
				
				foreach (char c in email){
					if (c == '@')
					{ 
					arroba = true; // Si encuentra '@', marca como verdadero.
					}
				}

				if (!arroba)
				{
				throw new CaracterInvalidoException(); // Lanza excepción si no encontró '@'.
				}
			}
			
			public static void ValidarExistencia(string n, Banco c){
			Cuenta ayuda = null; // Referencia temporal a la cuenta buscada.
			foreach(Cuenta e in c.listaCuentas){
				if (e.Numero == n){
					ayuda = e; // Si encuentra coincidencia, la asigna a ayuda.
				}
			}
			
			if (c.ExisteCuenta(ayuda) == false){
				throw new CuentaInexistenteException(); // Si no existe la cuenta, lanza excepción.
			}
			}
			
			public static void ValidarIgualdad(string n, string f){
				if (n == f){
					throw new NumerosDeCuentaIgualesExcepction(); // Lanza excepción si ambos números coinciden.
				}
			}
			
			public static void Main(string[] args)
			{
				string opcion; // Variable para la opción del menú.
				Banco c = new Banco("Banco de los Programadores"); // Crea instancia del banco con nombre.
				
				/*Cliente d2 = new Cliente("Valentin","Molina","Av Italia","1127476774","gyokaro@gmail.com","11223344"); // Crea cliente ejemplo.
				Cuenta p21 = new Cuenta("02","Molina","11223344",11600); // Crea cuenta ejemplo.
				Cuenta p2 = new Cuenta("01","Molina","11223344",1600); // Otra cuenta ejemplo.
				Cliente d3 = new Cliente("Evelyn","Santa Cruz","Calle EE UU","1133190322","simpsonita@gmail.com", "55667788");
				Cuenta p3 = new Cuenta("11","Santa Cruz","55667788",40000);
				Cuenta p31 = new Cuenta("12","Santa Cruz","55667788",96500);
				Cliente d4 = new Cliente("Lautaro","Dufour","Av Serbia","1165172012","lautyduf@gmail.com","99001111");
				Cuenta p4 = new Cuenta("21","Dufour","99001111",8900);

				c.AgregarCliente(d2); // Agrega cliente d2 al banco.
				c.AgregarCuenta(p2); // Agrega cuentas y clientes prefijados al banco para pruebas.
				c.AgregarCuenta(p21);
				c.AgregarCliente(d3);
				c.AgregarCuenta(p3);
				c.AgregarCuenta(p31);
				c.AgregarCliente(d4);
				c.AgregarCuenta(p4);*/
				
				do
				{
					Console.WriteLine("Bienvendio al "  + c.Nombre); // Muestra mensaje de bienvenida con el nombre del banco.
					Console.WriteLine("\n¿Qué desea hacer?" + "\na) Agregar una Cuenta." + "\nb) Eliminar una Cuenta." + "\nc) Lista de Clientes con más de una Cuenta." + "\nd) Realizar una Extracción." + "\ne) Realizar un Deposito." + "\nf) Transferir dinero entre Cuentas." + "\ng) Listado de Cuentas." + "\nh) Listado de Clientes." + "\ni) Salir."); // Muestra el menú.
					opcion = Console.ReadLine().ToLower(); // Lee la opción y la pasa a minúsculas.
					switch (opcion)
					{
						case "a":
							Console.Clear();
							Console.WriteLine("Ejecutando: Agregar una Cuenta.");
							CuentaNueva(c); // Llama al método para agregar cuenta.
							break;
						case "b":
							Console.Clear();
							Console.WriteLine("Ejecutando: Eliminar una Cuenta.");
							EliminarCuenta(c); // Llama al método para eliminar cuenta.
							break;
						case "c":
							Console.Clear();
							Console.WriteLine("Ejecutando: Lista de Clientes con más de una Cuenta.");
							ListarClientes(c); // Lista clientes con más de una cuenta.
							break;
						case "d":
							Console.Clear();
							Console.WriteLine("Ejecutando: Realizar una Extracción.");
							ExtraerStatic(c); // Ejecuta extracción.
							break;
						case "e":
							Console.Clear();
							Console.WriteLine("Ejecutando: Realizar un Deposito.");
							DepositarStatic(c); // Ejecuta depósito.
							break;
						case "f":
							Console.Clear();
							Console.WriteLine("Ejecutando: Transferir dinero entre Cuentas.");
							TransferirStatic(c); // Ejecuta transferencia.
							break;
						case "g":
							Console.Clear();
							Console.WriteLine("Ejecutando: Listado de Cuentas.");
							ListadoCuentas(c); // Muestra listado de cuentas.
							break;
						case "h":
							Console.Clear();
							Console.WriteLine("Ejecutando: Listado de Clientes.");
							ListadoClientes(c); // Muestra listado de clientes.
							break;
						case "i":
							Console.Clear();
							Console.WriteLine("---SALIENDO---");
							Console.WriteLine("Presione cualquier tecla para continuar con el cierre del programa.");
							Console.ReadKey(); // Espera una tecla antes de finalizar.
							break;
						default:
							Console.WriteLine("Eleccion Invalida. La entrada debe ser entre a-i");break; // Mensaje por opción inválida.
					}
					
					if (opcion != "i")
					{
						Console.WriteLine("\nPresione cualquier tecla para continuar...");
						Console.ReadKey();
						Console.Clear();
					}
				}
				while(opcion != "i"); // Repite el menú hasta que el usuario elija salir.
				Console.WriteLine("\n\nMuchas Gracias por confiar en nuestro servicio.");
				Console.WriteLine("\nPresione cualquier tecla para cerrar...");
				Console.ReadKey(); // Espera tecla antes de cerrar la consola.
			}
			
		}
}
